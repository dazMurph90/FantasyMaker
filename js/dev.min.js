var initCanvas={};console.log("Enter initCanvas.js");
var cy=cytoscape({container:document.getElementById("cy"),layout:{name:"grid",rows:1},style:[{selector:"node",style:{content:"data(id)","text-opacity":1,"text-valign":"center","text-halign":"center","background-color":"#777777","border-width":5,"border-opacity":0}},{selector:"edge",style:{width:4,"target-arrow-shape":"triangle","line-color":"#9dbaea","target-arrow-color":"#9dbaea","curve-style":"bezier"}},{selector:":selected",style:{"border-opacity":1,"line-color":"black","target-arrow-color":"black"}},
{selector:".page",style:{shape:"roundrectangle"}},{selector:".decision",style:{shape:"ellipse"}}],elements:{nodes:[{data:{id:"a",text:"sample text 1"},classes:"page"},{data:{id:"b",text:"sample text 2"},classes:"decision"}],edges:[{data:{id:"edge-ab",source:"a",target:"b"}}]},selectionType:"single"});console.log("Canvas done");var interactCanvas={};console.log("Enter interactCanvas.js");total_pages=0;states={DEFAULT:0,CONNECTING:1};current_state=states.DEFAULT;cy.on("tap",function(a){a.cyTarget===cy&&cy.add({data:{id:++total_pages,text:"new element text"},group:"nodes",renderedPosition:a.cyRenderedPosition,classes:"page"})});
cy.on("select",function(a){a=cy.$(":selected");console.log("Select: ",a.data("id"));current_state==states.CONNECTING&&(console.log("Creating link from ",source_node.data("id")," to ",a.data("id")),cy.add({data:{source:source_node.data("id"),target:a.data("id")},group:"edges"}),current_state=states.DEFAULT,$(".linkbutton").css("background-color","#dddddd"));a.hasClass("page")?($("#editpage").show(),$("#pagename").text("Page "+a.data("id")),document.getElementById("pagetext").value=a.data("text")):
a.hasClass("decision")&&($("#editdecision").show(),$("#decisionname").text("Decision "+a.data("id")))});cy.on("unselect",function(a){cy.$(":selected").empty()&&(console.log("No element selected"),$("#editpage").hide(),$("#editdecision").hide())});var ui={};function newConnection(a){current_state=states.CONNECTING;$(".linkbutton").css("background-color","green");console.log("Make a new node");source_node=cy.$(":selected")}$("#pagetext").on("input",function(a){a=this.value;cy.$(":selected").data("text",a);console.log("For element ",cy.$(":selected").data("id"),"apply",this.value," Now holds: ",cy.$(":selected").data("text"))});console.log("Enter main.js");
